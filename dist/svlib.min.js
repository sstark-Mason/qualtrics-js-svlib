var svlib=function(e){"use strict";function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var n,o;var s=function(){if(o)return n;o=1;var e=Object.create(null),t=function(n,o){return n?e[n]||(e[n]=t.ext(t.new(n,o))):e};return t.levels={error:1,warn:2,info:3,log:4,debug:5,trace:6},t.new=function(e,n){var o={};o[e]=function(){t.log(e,[].slice.call(arguments))};try{Object.defineProperty(o[e],"name",{get:function(){return e}})}catch(e){}return o[e]},t.log=function(n,o){var s=o.length>1&&t.levels[o[0]]?o.shift():"log";e[n][s].apply(e[n],o)},t.ext=function(e){for(var n in e.enabledFor=function(){},t.levels)e[n]=function(){};return e},n=t}(),a=t(s);const i=a("questionFeedback.js");function d(){console.groupCollapsed("Serializing and storing feedback for all questions.");const e=Object.keys(sessionStorage).filter((e=>e.endsWith("_feedback")));if(i.debug("Found %d feedback keys in sessionStorage.",e.length),e.length>0){const t={};e.forEach((e=>{const n=e.split("_")[0],o=sessionStorage.getItem(e);t[n]=o,i.debug("Storing feedback for %s: %s",n,o)})),Qualtrics.SurveyEngine.setJSEmbeddedData("feedbackData",JSON.stringify(t)),i.success("Stored feedback data as embedded data.")}else i.warn("No feedback keys found in sessionStorage.");console.groupEnd()}function r(){Qualtrics.SurveyEngine.addOnload((function(){a.getLogger("addOnload").log("SurveyEngine.onload"),Qualtrics.SurveyEngine.addOnPageSubmit((function(){d()}))}))}a("main.js");const l={addOnload:r,enableFeedbackOnQuestion:function(){console.groupCollapsed("Entering enableFeedbackOnQuestion for question: %s",this.questionId);const e="üó®Ô∏è",t=document.createElement("button");t.textContent=e,i.debug("Created feedback button.");const n=this.questionId,o=this.getQuestionContainer();i.debug("Retrieved question container for question ID: %s",n);const s=o.querySelector(".question-display-wrapper");if(!s)return void i.debug("Error: .question-display-wrapper not found in question container for question ID: %s",n);i.debug("Found .question-display-wrapper.");const a=document.createElement("textarea");a.placeholder="Please enter any comments about this question here.",i.debug("Created feedback textarea."),t.style.position="absolute",t.style.right="10px",t.style.top="10px",t.style.fontSize="1.5em",t.style.zIndex="1001",t.style.backgroundColor="transparent",t.style.border="none",t.style.cursor="pointer",t.style.outline="none",t.title="Have feedback?",i.debug("Applied initial styles to feedback button."),a.style.position="absolute",a.style.right="50px",a.style.top="10px",a.style.width="calc(100% - 60px)",a.style.maxWidth="300px",a.style.height="100px",a.style.maxHeight="200px",a.style.zIndex="1000",a.style.display="none",a.style.backgroundColor="#f9f9f9",a.style.border="1px solid #ddd",a.style.borderRadius="5px",a.style.padding="10px",a.style.fontSize="1em",a.style.resize="vertical",a.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.1)",a.style.transition="all 0.3s ease-in-out",a.style.fontFamily="Arial, sans-serif",a.style.color="#333",a.style.lineHeight="1.6",a.style.boxSizing="border-box",a.style.overflowY="auto",a.style.wordWrap="break-word",i.debug("Applied initial styles to feedback textarea."),"static"===getComputedStyle(s).position&&(s.style.position="relative",i.debug("Set questionDisplayWrapper position to 'relative'.")),s.appendChild(t),s.appendChild(a),i.debug("Appended feedback button and textarea to questionDisplayWrapper."),t.addEventListener("click",(function(){i.debug("Feedback button clicked for question: %s",n),"none"===a.style.display?(i.debug("Showing feedback textarea."),a.style.display="block",t.textContent="‚úîÔ∏è",t.style.transform="scaleX(1)",a.style.right=`${10+t.offsetWidth+5}px`,a.style.top="10px",a.focus()):(i.debug("Hiding feedback textarea."),a.style.display="none",t.style.top="10px",t.style.right="10px")})),a.addEventListener("blur",(function(){i.debug("Textarea lost focus.");const o=a.value.trim();if(o){try{sessionStorage.setItem(n+"_feedback",o),i.debug("Feedback saved to sessionStorage for question: %s",n)}catch(e){i.debug("Error saving feedback to sessionStorage: %o",e)}t.textContent="üí¨",t.style.transform="scaleX(-1)"}else i.debug("No feedback entered for question: %s",n),t.textContent=e;event.relatedTarget!==t&&(i.debug("Textarea blurred and focus moved elsewhere. Hiding textarea."),a.style.display="none")})),document.addEventListener("DOMContentLoaded",(function(){const o=sessionStorage.getItem(n+"_feedback");o?(a.value=o,t.textContent="üí¨",i.debug("Loaded saved feedback from sessionStorage for question: %s",n)):(i.debug("No saved feedback found in sessionStorage for question: %s",n),t.textContent=e)})),i.debug("Feedback button event listener added for question: %s. Exiting enableFeedbackOnQuestion().",n),console.groupEnd()},storeQuestionFeedbackAsEmbeddedData:d};return"undefined"!=typeof window&&(window.svlib=l),e.addOnload=r,e.default=l,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=svlib.min.js.map
